---
sidebar_position: 2
sidebar_label: 准备环境
---

## 1、网络要求
要求各机器各组件正常运行提供如下的网络端口配置：

| **组件**                | **默认端口**     |                         **说明**                          |
| ----------------------- | ---------------- | :-------------------------------------------------------: |
| DDHApplicationServer    | 8081、2551、8586 |  8081为http server端口，2551为rpc通信端口，8586为jmx端口  |
| WorkerApplicationServer | 2552、9100、8585 | 2552 rpc通信端口，8585为jmx端口，9100为主机数据采集器端口 |
| nginx                   | 8888             |                    提供 UI 端通信端口                     |

DDHApplicationServer为API接口层即web后端，主要负责处理前端UI层的请求。该服务统一提供RESTful api向外部提供请求服务。

WorkerApplicationServer负责执行DDHApplicationServer发送的指令，包括服务安装、启动、停止、重启等指令。

##### 2.浏览器要求
   推荐使用 Chrome 或是 Chrome内核的浏览器以访问可视化管理页面   
   
##### 3.修改主机名
    hostnamectl set-hostname bigdata-ywh-xxx
##### 4.修改/etc/hosts文件 
```
vim /etc/hosts
#贴入（示例）
172.27.216.xxx bigdata-xxx-234
172.27.216.xxx bigdata-xxx-235
172.27.216.xxx bigdata-xxx-248
172.27.216.xxx bigdata-xxx-249
172.27.216.xxx bigdata-xxx-250
```

##### 5.设置ssh免密

一路回车 设置无密码密钥   
```
ssh-keygen -t rsa   
```

在各节点获取公钥  
```
 cat ~/.ssh/id_ras_pub  
```
把cat的内容 按行填充到 master节点的
```
~/.ssh/authorized_keys 
```
测试节点之间互联 bigdata-xxx-250 执行
  
```
 ssh bigdata-xxx-248
```

##### 6.修改打开文件数[在每个节点都需要执行]
```
echo '* soft nofile 1024000' >>/etc/security/limits.conf
echo '* hard nofile 1024000' >>/etc/security/limits.conf 
```
  
   
##### 7.关闭防火墙，selinux
```
systemctl stop firewalld.service
systemctl disable firewalld.service
vim /etc/selinux/config
#修改
SELINUX=disabled
```

##### 8.设置ntp时钟同步

```
#先查看是否已经安装ntp
rpm -q ntp 
#没有则安装
yum install ntp
#设置自启
systemctl enable ntpd.service
chkconfig --list ntpd
```

